<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>Interval</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Interval</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Lib.html#"><span class="id" type="library">Lib</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="NonEmpty.html#"><span class="id" type="library">NonEmpty</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Range.html#"><span class="id" type="library">Range</span></a>.<br/>

<br/>
<span class="id" type="keyword">Generalizable</span> <span class="id" type="keyword">All</span> <span class="id" type="keyword">Variables</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h2 class="section">Interval</h2>

<div class="paragraph"> </div>

 A lifetime interval defines the lifetime of a variable.  It is defined as
    a list of ranges "covered" by that variable in the low-level intermediate
    representation (LIR).  Gaps in the list of ranges are called "lifetime
    holes".  By summing the extent of a list of ranges, we have an idea of how
    much ground is left to cover, and this gives us a notion of well-founded
    recursion for iterating over intervals that may split as we examine them
 i.e., whose total extent must decrease after each pass.

<div class="paragraph"> </div>

    A lifetime is not necessarily only the distance that a variable is first
    and last used.  The lifetime of a variable used in a loop extends to the
    whole loop, for example, even if it is only used at the very end.  In this
    sense, coverage takes into account code flow, or what ranges would map to
    if all loops were unrolled, and then rolled back keeping track of
    coverage.

<div class="paragraph"> </div>

    Use positions are actual instructions where a variable is read from or
    written to, and whether it is required to be in a register at that
    point. 
<div class="paragraph"> </div>

 If for some reason we cannot assign a single register for all ranges, then
    the interval is split into two or more intervals, so each interval can be
    assigned its own register. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Record</span> <a name="IntervalDesc"><span class="id" type="record">IntervalDesc</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ibeg"><span class="id" type="projection">ibeg</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="iend"><span class="id" type="projection">iend</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="rds"><span class="id" type="projection">rds</span></a>  : <a class="idref" href="NonEmpty.html#NonEmpty"><span class="id" type="inductive">NonEmpty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">{</span></a> <span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">:</span></a> <a class="idref" href="Range.html#RangeDesc"><span class="id" type="record">RangeDesc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">&amp;</span></a> <a class="idref" href="Range.html#Range"><span class="id" type="inductive">Range</span></a> <span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">}</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Caching this property comes in handy, as it can be tricky to determine
        it by reduction in some cases. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a name="interval_nonempty"><span class="id" type="projection">interval_nonempty</span></a> : <a class="idref" href="Interval.html#ibeg"><span class="id" type="method">ibeg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Interval.html#iend"><span class="id" type="method">iend</span></a><br/>
}.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="Interval"><span class="id" type="inductive">Interval</span></a> : <a class="idref" href="Interval.html#IntervalDesc"><span class="id" type="record">IntervalDesc</span></a> → <span class="id" type="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="I_Sing"><span class="id" type="constructor">I_Sing</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span> (<span class="id" type="var">r</span> : <a class="idref" href="Range.html#Range"><span class="id" type="inductive">Range</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> {| <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ibeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rbeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">iend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rds</span></a>  <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Sing</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">existT</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">_</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">r</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">interval_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">range_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}<br/>
<br/>
&nbsp;&nbsp;| <a name="I_Cons1"><span class="id" type="constructor">I_Cons1</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">y</span> <span class="id" type="var">ib</span> <span class="id" type="var">ie</span> <span class="id" type="var">ne</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> {| <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ibeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ib</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">iend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ie</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rds</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Sing</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">y</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">interval_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ne</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span> (<span class="id" type="var">r</span> : <a class="idref" href="Range.html#Range"><span class="id" type="inductive">Range</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a>) (<span class="id" type="var">H</span> : <a class="idref" href="Range.html#rend"><span class="id" type="projection">rend</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'<='_x"><span class="id" type="notation">≤</span></a> <a class="idref" href="Interval.html#ib"><span class="id" type="variable">ib</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> {| <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ibeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rbeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">iend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ie</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rds</span></a>  <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Cons</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">existT</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">_</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">r</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Sing</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">y</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">interval_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">lt_le_shuffle</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">range_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">H</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ne</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}<br/>
<br/>
&nbsp;&nbsp;| <a name="I_Consn"><span class="id" type="constructor">I_Consn</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">y</span> <span class="id" type="var">xs</span> <span class="id" type="var">ib</span> <span class="id" type="var">ie</span> <span class="id" type="var">ne</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> {| <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ibeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ib</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">iend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ie</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rds</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Cons</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">y</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">xs</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">interval_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ne</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;→ <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span> (<span class="id" type="var">r</span> : <a class="idref" href="Range.html#Range"><span class="id" type="inductive">Range</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a>) (<span class="id" type="var">H</span> : <a class="idref" href="Range.html#rend"><span class="id" type="projection">rend</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'<='_x"><span class="id" type="notation">≤</span></a> <a class="idref" href="Interval.html#ib"><span class="id" type="variable">ib</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> {| <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ibeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rbeg</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">iend</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ie</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">rds</span></a>  <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Cons</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">existT</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">_</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">r</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">NE_Cons</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">y</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">xs</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">;</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">interval_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">:=</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">lt_le_shuffle</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">(</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">range_nonempty</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">x</span></a><a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">)</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">H</span></a> <a class="idref" href="Interval.html#Build_IntervalDesc"><span class="id" type="constructor">ne</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="getIntervalDesc"><span class="id" type="definition">getIntervalDesc</span></a> `(<span class="id" type="var">i</span> : <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">d</span>) := <a class="idref" href="Interval.html#d"><span class="id" type="variable">d</span></a>.<br/>

<br/>
<span class="id" type="keyword">Coercion</span> <a class="idref" href="Interval.html#getIntervalDesc"><span class="id" type="definition">getIntervalDesc</span></a> : <span class="id" type="var">Interval</span> &gt;-&gt; <span class="id" type="var">IntervalDesc</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="intervalStart"><span class="id" type="definition">intervalStart</span></a> `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">i</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> := <a class="idref" href="Interval.html#ibeg"><span class="id" type="projection">ibeg</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="intervalEnd"><span class="id" type="definition">intervalEnd</span></a>   `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">i</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> := <a class="idref" href="Interval.html#iend"><span class="id" type="projection">iend</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="intervalCoversPos"><span class="id" type="definition">intervalCoversPos</span></a> `(<span class="id" type="var">i</span> : <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">d</span>) (<span class="id" type="var">pos</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#andb"><span class="id" type="definition">andb</span></a> (<a class="idref" href="Interval.html#intervalStart"><span class="id" type="definition">intervalStart</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Numbers.Natural.Peano.NPeano.html#:nat_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Interval.html#pos"><span class="id" type="variable">pos</span></a>) (<a class="idref" href="Interval.html#pos"><span class="id" type="variable">pos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Numbers.Natural.Peano.NPeano.html#:nat_scope:x_'<?'_x"><span class="id" type="notation">&lt;?</span></a> <a class="idref" href="Interval.html#intervalEnd"><span class="id" type="definition">intervalEnd</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="intervalExtent"><span class="id" type="definition">intervalExtent</span></a> `(<span class="id" type="var">i</span> : <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">d</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Interval.html#intervalEnd"><span class="id" type="definition">intervalEnd</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="Interval.html#intervalStart"><span class="id" type="definition">intervalStart</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Interval_nonempty"><span class="id" type="lemma">Interval_nonempty</span></a> : <span class="id" type="keyword">∀</span> `(<span class="id" type="var">i</span> : <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">d</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="Interval.html#intervalStart"><span class="id" type="definition">intervalStart</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Interval.html#intervalEnd"><span class="id" type="definition">intervalEnd</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Interval.html#intervalStart"><span class="id" type="definition">intervalStart</span></a>, <a class="idref" href="Interval.html#intervalEnd"><span class="id" type="definition">intervalEnd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="var">min_max</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Interval_extent_nonzero"><span class="id" type="lemma">Interval_extent_nonzero</span></a> : <span class="id" type="keyword">∀</span> `(<span class="id" type="var">i</span> : <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">d</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="Interval.html#intervalExtent"><span class="id" type="definition">intervalExtent</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Peano.html#:nat_scope:x_'>'_x"><span class="id" type="notation">&gt;</span></a> 0.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Interval.html#intervalExtent"><span class="id" type="definition">intervalExtent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">pose</span> (<a class="idref" href="Interval.html#Interval_nonempty"><span class="id" type="lemma">Interval_nonempty</span></a> <span class="id" type="var">i</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Lib.html#lt_minus"><span class="id" type="lemma">lt_minus</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">l</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="anyRangeIntersects"><span class="id" type="definition">anyRangeIntersects</span></a> `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">i</span>) `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">j</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">f</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> := <a class="idref" href="Range.html#rangesIntersect"><span class="id" type="definition">rangesIntersect</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> <a class="idref" href="Interval.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> <a class="idref" href="Interval.html#y"><span class="id" type="variable">y</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Lists.List.html#fold_right"><span class="id" type="definition">fold_right</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">r</span> <span class="id" type="var">b</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#orb"><span class="id" type="definition">orb</span></a> <a class="idref" href="Interval.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Lists.List.html#existsb"><span class="id" type="definition">existsb</span></a> (<a class="idref" href="Interval.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="Interval.html#r"><span class="id" type="variable">r</span></a>) (<a class="idref" href="NonEmpty.html#NE_to_list"><span class="id" type="definition">NE_to_list</span></a> (<a class="idref" href="Interval.html#rds"><span class="id" type="projection">rds</span></a> <a class="idref" href="Interval.html#j"><span class="id" type="variable">j</span></a>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> (<a class="idref" href="NonEmpty.html#NE_to_list"><span class="id" type="definition">NE_to_list</span></a> (<a class="idref" href="Interval.html#rds"><span class="id" type="projection">rds</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>)).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="firstIntersectionPoint"><span class="id" type="definition">firstIntersectionPoint</span></a> `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">i</span>) `(<a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a> <span class="id" type="var">j</span>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#option"><span class="id" type="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NonEmpty.html#NE_fold_left"><span class="id" type="definition">NE_fold_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">acc</span> <span class="id" type="var">rd</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Interval.html#acc"><span class="id" type="variable">acc</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">x</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NonEmpty.html#NE_fold_left"><span class="id" type="definition">NE_fold_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">acc'</span> <span class="id" type="var">rd'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Interval.html#acc'"><span class="id" type="variable">acc'</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">x</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a> ⇒ <a class="idref" href="Range.html#rangesIntersectionPoint"><span class="id" type="definition">rangesIntersectionPoint</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> <a class="idref" href="Interval.html#rd"><span class="id" type="variable">rd</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> <a class="idref" href="Interval.html#rd'"><span class="id" type="variable">rd'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="Interval.html#rds"><span class="id" type="projection">rds</span></a> <a class="idref" href="Interval.html#j"><span class="id" type="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="Interval.html#rds"><span class="id" type="projection">rds</span></a> <a class="idref" href="Interval.html#i"><span class="id" type="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl4/stdlib/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
Fixed Intervals

<div class="paragraph"> </div>

    Some machine instructions require their operands in fixed
    registers. Such constraints are already considered during the
    construction of the LIR by emitting physical register operands instead
    of virtual register operands. Although the register allocator must
    leave these operands unchanged, they must be considered during
    register allocation because they limit the number of available
    registers. Information about physical registers is collected in fixed
    intervals.

<div class="paragraph"> </div>

    For each physical register, one fixed interval stores where the
    register is not available for allocation. Use positions are not needed
    for fixed intervals because they are never split and spilled. Register
    constraints at method calls are also modeled using fixed intervals:
    Because all registers are destroyed when the call is executed, ranges
    of length 1 are added to all fixed intervals at the call
    site. Therefore, the allocation pass cannot assign a register to any
    interval there, and all intervals are spilled before the call.

<div class="paragraph"> </div>

    Note that we do not distinguish between the two types of intervals in this
    code, and in fact make use of the use positions to track the locations of
    fixity (such as call sites) within the code. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="FixedInterval"><span class="id" type="definition">FixedInterval</span></a> := <a class="idref" href="Interval.html#Interval"><span class="id" type="inductive">Interval</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>